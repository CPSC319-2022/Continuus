steps:
  # Docker Build
  - name: 'gcr.io/cloud-builders/docker'
    entrypoint: 'bash'
    args: ['-c', 'docker build . --tag continuus northamerica-northeast2/-docker.pkg.dev/automatic-bot-376307/continuus/continuus']  

  - name: 'gcr.io/cloud-builders/docker'
    entrypoint: 'bash'
    args: ['-c', 'docker tag continuus:latest gcr.io/github.com/cpsc319-2022/continuus:${COMMIT_SHA}']

  # Docker Push
  - name: 'gcr.io/cloud-builders/docker'
    entrypoint: 'bash'
    args: ['-c', 'docker push northamerica-northeast2/-docker.pkg.dev/automatic-bot-376307/continuus/continuus']

  - name: 'gcr.io/cloud-builders/docker'
    entrypoint: 'bash'
    args: ['-c', 'docker run continuus npm run test']
